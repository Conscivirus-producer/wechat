<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>老师信息查询</title>
<link href="http://www.ilearnnn.com/timepicker/sample in bootstrap v3/bootstrap/css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="http://www.ilearnnn.com/timepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" media="screen">
<style>
*{
	font-size:10px;
}
</style>
</head>
<body>
<div class="container">
<div class="row">
	<div class="col-md-2 col-md-offset-5">
		<h5 class="text-center">老师信息查询</h5>
	</div>	
</div>
<form method="post" action="">
<div class="row">
  <div class="col-md-2">
  	<div class="form-group">
    	<label for="name">姓名：</label>
    	<input type="text" class="form-control input-sm" id="name" name="name">
  	</div>
  </div>
  <div class="col-md-2">
  	<div class="form-group">
    	<label for="studentNumber">学号：</label>
    	<input type="text" class="form-control input-sm" id="studentNumber" name="studentNumber">
  	</div>
  </div>
  <div class="col-md-2">
  	<div class="form-group">
    	<label for="faculty">学院：</label>
    	<input type="text" class="form-control input-sm" id="faculty" name="faculty">
  	</div>
  </div>
  <div class="col-md-2">
  	<div class="form-group">
    	<label for="major">专业：</label>
    	<input type="text" class="form-control input-sm" id="major" name="major">
  	</div>
  </div>
	<div class="col-md-2">
  	<div class="form-group">
    	<label for="gender">性别：</label>
    	<select class="form-control input-sm" id="gender" name="gender">
  			<option value="">不限</option>
  			<option value="m">男</option>
  			<option value="f">女</option>
		</select>
  	</div>
  </div>
  <div class="col-md-2">
  	<div class="form-group">
    	<label for="mobile">手机：</label>
    	<input type="text" class="form-control input-sm" id="mobile" name="mobile">
  	</div>
  </div>
</div>
<div class="row">
	<div class="col-md-2">
  		<div class="form-group">
    		<label for="typeCode">科目大类：</label>
    		<select class="form-control input-sm" id="typeCode" name="typeCode">
    			<option value="">不限</option>
    			<option value="A">舞蹈与音乐</option>
    			<option value="B">体育运动</option>
    			<option value="C">书法与美术</option>
    			<option value="D">人文科学与小语种</option>
    			<option value="E">演讲与播音主持</option>
    			<option value="F">编程软件应用与棋类</option>
    			<option value="SU">科目</option>
			</select>
  		</div>
  	</div>
  	<div class="col-md-2">
  		<div class="form-group">
    		<label for="code">科目小类：</label>
    		<select class="form-control input-sm" id="code" name="code">
			</select>
  		</div>
  	</div>
  	<div class="col-md-2">
  		<div class="form-group">
    		<label for="starttime">注册开始时间：</label>
    		<input class="form-control input-sm" id="starttime" name="starttime" readonly>
  		</div>
  	</div>
  	<div class="col-md-2">
  		<div class="form-group">
    		<label for="endtime">注册结束时间：</label>
    		<input class="form-control input-sm" id="endtime" name="endtime" readonly>
  		</div>
  	</div>
  	<div class="col-md-2">
  		<div class="form-group">
    		<label for="teacherStatus">老师状态：</label>
    		<select class="form-control input-sm" id="teacherStatus" name="teacherStatus">
    			<option value="">不限</option>
    			<option value="I">I</option>
  				<option value="R">R</option>
			</select>
  		</div>
  	</div>
  	<div class="col-md-2">
  		<div class="form-group">
    		<label for="address">可教地点：</label>
    		<select class="form-control input-sm" id="address" name="address">
    			<option value="">不限</option>
  				<option value="location1">南山区</option>
  				<option value="location2">福田区</option>
  				<option value="location3">罗湖区</option>
  				<option value="location4">宝安区</option>
  				<option value="location5">龙岗区</option>
			</select>
  		</div>
  	</div>
</div>
<div class="row">
	<div class="col-md-2 col-md-offset-5">
		<input type="submit" class="btn btn-info btn-block" name="search" id="search" value="查询">
	</div>
</div>
</form>
<div class="row" style="margin-top:10px">
	<div class="col-md-12">
	<div class="table-responsive">
      <table class="table table-bordered table-striped">
        <thead>
          <tr>
          	<th style="display:none">ID</th>
            <th width="10">基本信息</th>
            <th width="10">注册时间</th>
            <th width="10"><font color="#48C9B0">个人描述</font></th>
            <th width="10">可教科目</th>
            <th width="10"><font color="#48C9B0">时薪</font></th>
            <th width="10">年级</th>
            <th width="10">地点</th>
            <th width="10">证书</th>
            <th width="10"><font color="#48C9B0">状态</font></th>
            <th width="10"><font color="#48C9B0">评分</font></th>
          </tr>
        </thead>
        <tbody>
           <volist name="data" id="vo">
		<tr>
		<td style="display:none" class="openId">{$vo.openId}</td>
		<td width="10">姓名：{$vo.name}<br>学院：{$vo.faculty}<br>专业：{$vo.major}<br>性别：{$vo.gender}<br>手机号：{$vo.mobile}<br>学号：{$vo.studentNumber}<br><font color="#48C9B0">openId：{$vo.openId}</font><br></td>
		<td width="10">{$vo.created_dt}</td>
		<td width="10" class="description">{$vo.description}</td>
		<td width="10">
		 <volist name="vo['offer']" id="offer">
		 	<span class='offerid' style='display:none'>{$offer.offerId}</span> 
		 	<span class='offercode' style='display:none'>{$offer.code}</span>  
        	<button class='btn btn-info btn-block btn-xs teacheroffer' style='margin-top:1px'>{$offer.name}</button>
   		 </volist>  
		</td>
		<td width="10" class="price">{$vo.price}</td>
		<td width="10">{$vo.highestGrade}</td>
		<td width="10">{$vo.address}</td>
		<td width="10">
		 <volist name="vo['certificate']" id="certificate">  
        	{$certificate.description}<br>
   		 </volist>
		</td>
		<td width="10" class="teacherStatus">{$vo.teacherStatus}</td>
		<td width="10" class="rating">{$vo.rating}</td>
		</tr>
		</volist>
        </tbody>
      </table>
    </div><!-- /.table-responsive -->
	</div>
</div>
</div>
<script type="text/javascript" src="http://www.ilearnnn.com/timepicker/sample in bootstrap v3/jquery/jquery-1.8.3.min.js" charset="UTF-8"></script>
<script type="text/javascript" src="http://www.ilearnnn.com/timepicker/sample in bootstrap v3/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="http://www.ilearnnn.com/timepicker/js/bootstrap-datetimepicker.js" charset="UTF-8"></script>
<script type="text/javascript" src="http://www.ilearnnn.com/timepicker/js/locales/bootstrap-datetimepicker.fr.js" charset="UTF-8"></script>
<script type="text/javascript">
var rootUrl = "www.ilearnnn.com";
$('#starttime').datetimepicker({
    language:  'en',
    weekStart: 1,
    todayBtn:  1,
	autoclose: 1,
	todayHighlight: 1,
	startView: 2,
	minView: 2,
	forceParse: 0
});
$('#endtime').datetimepicker({
    language:  'en',
    weekStart: 1,
    todayBtn:  1,
	autoclose: 1,
	todayHighlight: 1,
	startView: 2,
	minView: 2,
	forceParse: 0
});

$(document).ready(function(){
	$("#typeCode").change(function(){
		var typeCode = $(this).children('option:selected').val();
		if(typeCode == ""){
			$("#code").children().remove();
		}else{
		var url = "http://"+rootUrl+"/service.php?typeCode="+typeCode;
		$.getJSON(url,function(data){
			$("#code").children().remove();
			var code = data.code;
			var name = data.name;
			var length = code.length;
			for(var i = 0;i < length;i++){
				var optionCode = code[i];
				var optionName = name[i];
				$("#code").append("<option value='"+optionCode+"'>"+optionName+"</option>");
			}
		});
		}
	});
	
	$(".description").click(function(){
		var item = $(this);
		if(item.children("button").length == 0){
			var openId = $(this).prevAll(".openId").text();
			var field = $(this).attr("class");
			var val = $(this).text();
			$(this).html("");
			$("<textarea>").appendTo($(this)).attr("class","form-control input-sm").attr("rows","5").html(val).bind({
				click:function(e){
					e.stopPropagation();
				}
			});
			$("<button>").appendTo($(this)).attr("class","btn btn-info btn-block btn-xs").attr("style","margin-top:5px").html("提交修改").bind({
				click:function(e){
					e.stopPropagation();
					var newVal = $(this).prev().val();
					var url = "http://"+rootUrl+"/thinkphp/?m=Search&c=Teacher&a=update"+"&openId="+openId+"&field="+field+"&val="+newVal;
					$.getJSON(url, function(data){
						if(data.status == 1){
							item.html(newVal);
						}
					});
				}
			});
		}
	});
	$(".price").click(function(){
		var item = $(this);
		if(item.children("button").length == 0){
			var openId = $(this).prevAll(".openId").text();
			var field = $(this).attr("class");
			var val = $(this).text();
			$(this).html("");
			$("<input>").appendTo($(this)).attr("class","form-control input-sm").val(val).bind({
				click:function(e){
					e.stopPropagation();
				}
			});
			$("<button>").appendTo($(this)).attr("class","btn btn-info btn-block btn-xs").attr("style","margin-top:5px").html("提交修改").bind({
				click:function(e){
					e.stopPropagation();
					var newVal = $(this).prev().val();
					var url = "http://"+rootUrl+"/thinkphp/?m=Search&c=Teacher&a=update"+"&openId="+openId+"&field="+field+"&val="+newVal;
					$.getJSON(url, function(data){
						if(data.status == 1){
							item.html(newVal);
						}
					});
				}
			});
		}
	});
	$(".teacherStatus").click(function(){
		var item = $(this);
		if(item.children("button").length == 0){
			var openId = $(this).prevAll(".openId").text();
			var field = $(this).attr("class");
			var val = $(this).text();
			$(this).html("");
			$("<select>").appendTo($(this)).attr("class","form-control input-sm").html("<option value='R'>R</option><option value='I'>I</option>").val(val).bind({
				click:function(e){
					e.stopPropagation();
				}
			});
			$("<button>").appendTo($(this)).attr("class","btn btn-info btn-block btn-xs").attr("style","margin-top:5px").html("提交修改").bind({
				click:function(e){
					e.stopPropagation();
					var newVal = $(this).prev().val();
					var url = "http://"+rootUrl+"/thinkphp/?m=Search&c=Teacher&a=update"+"&openId="+openId+"&field="+field+"&val="+newVal;
					$.getJSON(url, function(data){
						if(data.status == 1){
							item.html(newVal);
						}
					});
				}
			});
		}
	
	});
	$(".rating").click(function(){
		var item = $(this);
		if(item.children("button").length == 0){
			var openId = $(this).prevAll(".openId").text();
			var field = $(this).attr("class");
			var val = $(this).text();
			$(this).html("");
			$("<input>").appendTo($(this)).attr("class","form-control input-sm").val(val).bind({
				click:function(e){
					e.stopPropagation();
				}
			});
			$("<button>").appendTo($(this)).attr("class","btn btn-info btn-block btn-xs").attr("style","margin-top:5px").html("提交修改").bind({
				click:function(e){
					e.stopPropagation();
					var newVal = $(this).prev().val();
					var url = "http://"+rootUrl+"/thinkphp/?m=Search&c=Teacher&a=update"+"&openId="+openId+"&field="+field+"&val="+newVal;
					$.getJSON(url, function(data){
						if(data.status == 1){
							item.html(newVal);
						}
					});
				}
			});
		}
	});
	$(".btn.btn-info.btn-block.btn-xs.teacheroffer").click(function(){
		$button = $(this);
		var code = $(this).prev().text();
		var offerId = $(this).prev().prev().text();
		var offerName = $(this).text();
		if(code != ''){
			if(confirm("确认要删除"+$(this).text()+"吗？")){
				var url = "http://"+rootUrl+"/thinkphp/?m=Search&c=Teacher&a=deleteOffer"+"&offerId="+offerId;
				$.getJSON(url, function(data){
					if(data.status == 1){
						$button.prev().prev().remove();
						$button.prev().remove();
						$button.remove();
					}
				});
			}
		}else{
			if(confirm("删除"+$(this).text()+"请按确认，修改请按取消")){
				var url = "http://"+rootUrl+"/thinkphp/?m=Search&c=Teacher&a=deleteOffer"+"&offerId="+offerId;
				$.getJSON(url, function(data){
					if(data.status == 1){
						$button.prev().prev().remove();
						$button.prev().remove();
						$button.remove();
					}
				});
			}else{
				var newOfferName = prompt("请输入新可教科目名字",offerName);
				var url = "http://"+rootUrl+"/thinkphp/?m=Search&c=Teacher&a=updateOffer"+"&offerId="+offerId+"&newOfferName="+newOfferName;
				$.getJSON(url, function(data){
					if(data.status == 1){
						$button.text(newOfferName);
					}
				});
			}
		}
	});
});

</script>
</body>
</html>
























